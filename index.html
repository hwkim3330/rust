<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Insertion Sort – Push Animation</title>

<style>
:root { --box: 64; --gap: 12; --step: calc(var(--box) + var(--gap)); --dur: .5s; }

body  { margin:0; font-family:system-ui, sans-serif; background:#f4f6f8; }
h1    { text-align:center; margin:24px 0; }

#stage          { position:relative; width:max-content; margin:40px auto; }
.cell           { position:absolute; width:var(--box)px; height:var(--box)px;
                  line-height:var(--box)px; text-align:center; border-radius:10px;
                  background:#455a64; color:#fff; font-size:1.4rem;
                  transition: left var(--dur) cubic-bezier(.4,.0,.2,1),
                              transform var(--dur) cubic-bezier(.4,.0,.2,1),
                              background var(--dur); }
.key            { background:#c62828 !important; transform:translateY(-80px); }
.compare        { background:#f9a825 !important; }

#log            { max-width:620px; margin:24px auto; white-space:pre-line; font-size:.9rem; }
</style>
</head>
<body>
<h1>Insertion Sort – Push Animation</h1>

<div id="stage"></div>
<pre id="log"></pre>

<script>
/* ----------- 데이터 & 설정 ----------- */
const ARR        = [5, 2, 9, 1, 5, 6];        // 정렬 대상
const DELAY      = 800;                       // 단계 지연(ms)
const BOX_W      = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--box'));
const GAP        = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--gap'));
const STEP       = BOX_W + GAP;

/* ----------- DOM 초기화 ----------- */
const stage = document.getElementById('stage');
const logEl = document.getElementById('log');
stage.style.width = `${ARR.length * STEP - GAP}px`; // 가로 길이 설정

function spawnBoxes(arr){
  stage.innerHTML = '';
  arr.forEach((v,i)=>{
    const d   = document.createElement('div');
    d.className = 'cell';
    d.textContent = v;
    d.style.left = `${i*STEP}px`;
    stage.appendChild(d);
  });
}
spawnBoxes(ARR);

/* ----------- 유틸 ----------- */
const sleep  = ms => new Promise(r=>setTimeout(r,ms));
const boxes  = () => [...document.querySelectorAll('.cell')];

/* ----------- 삽입정렬 애니메이션 ----------- */
async function insertionSort(){
  const data = [...ARR];              // 데이터 복사
  for(let i=1;i<data.length;i++){
    let keyVal = data[i];
    let j=i-1;

    /* key 박스 선택 & Lift */
    const keyBox = boxes()[i];
    keyBox.classList.add('key');
    logEl.textContent += `[i=${i}] key=${keyVal}\n`;
    await sleep(DELAY/2);

    /* 비교하며 밀어내기 */
    while(j>=0 && data[j] > keyVal){
      const compBox = boxes()[j];
      compBox.classList.add('compare'); // 비교 하이라이트

      /* 데이터 & 위치 갱신 */
      data[j+1]     = data[j];
      compBox.style.left = `${(j+1)*STEP}px`;  // 오른쪽으로 슬라이드
      await sleep(DELAY);

      compBox.classList.remove('compare');
      j--;
    }

    /* key 값 내려 끼우기 */
    data[j+1]       = keyVal;
    keyBox.style.left = `${(j+1)*STEP}px`;
    await sleep(DELAY/2);
    keyBox.classList.remove('key');
  }
  logEl.textContent += `\n✔ 최종 결과: [${data.join(', ')}]`;
}

insertionSort();
</script>
</body>
</html>
